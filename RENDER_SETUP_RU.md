# ๐ ะะฐัััะพะนะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั ะฒ Render

## ๐ ะงัะพ ะฝัะถะฝะพ ะดะพะฑะฐะฒะธัั ะฒ Render Dashboard

### ะจะฐะณ 1: ะัะบัะพะน Render Dashboard
1. ะะฐะนะดะธ ะฝะฐ https://dashboard.render.com
2. ะัะฑะตัะธ ัะฒะพะน ัะตัะฒะธั `legal-ai-vault`
3. ะะตัะตะนะดะธ ะฒ ัะฐะทะดะตะป **"Environment"** (ัะปะตะฒะฐ ะฒ ะผะตะฝั)
4. ะะฐะถะผะธ **"Add Environment Variable"**

---

## โ ะะฑัะทะฐัะตะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต (ะผะธะฝะธะผัะผ ะดะปั ัะฐะฑะพัั)

### 1. **DATABASE_URL**
```
Key: DATABASE_URL
Value: (ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะทะดะฐะตััั ะฟัะธ ะฟะพะดะบะปััะตะฝะธะธ PostgreSQL)
```
- ะัะปะธ ัะพะทะดะฐะตัั PostgreSQL ะฒ Render - ะฟะตัะตะผะตะฝะฝะฐั ะดะพะฑะฐะฒะธััั ะฐะฒัะพะผะฐัะธัะตัะบะธ
- ะัะปะธ ะธัะฟะพะปัะทัะตัั ะฒะฝะตัะฝัั ะะ - ัะบะพะฟะธััะน connection string

---

### 2. **OPENROUTER_API_KEY**
```
Key: OPENROUTER_API_KEY
Value: sk-or-v1-ัะฒะพะน-ะบะปัั-ะพั-openrouter
```
- ะะพะปััะธ ะฝะฐ https://openrouter.ai
- ะัะถะตะฝ ะบะฐะบ fallback, ะตัะปะธ ะฏะฝะดะตะบั ะฝะต ะฝะฐัััะพะตะฝ

---

### 3. **JWT_SECRET_KEY** (ะะะะขะะงะะ!)
```
Key: JWT_SECRET_KEY
Value: ัะฒะพะน-ะดะปะธะฝะฝัะน-ัะตะบัะตัะฝัะน-ะบะปัั
```
- **ะะธะฝะธะผัะผ 32 ัะธะผะฒะพะปะฐ!**
- ะกะณะตะฝะตัะธััะน: `openssl rand -hex 32` (ะฒ ัะตัะผะธะฝะฐะปะต)
- ะะปะธ ะธัะฟะพะปัะทัะน ะปัะฑะพะน ะณะตะฝะตัะฐัะพั ัะปััะฐะนะฝัั ัััะพะบ

---

### 4. **CORS_ORIGINS**
```
Key: CORS_ORIGINS
Value: https://ัะฒะพะน-ััะพะฝัะตะฝะด.onrender.com
```
- URL ัะฒะพะตะณะพ ััะพะฝัะตะฝะดะฐ ะฝะฐ Render
- ะัะปะธ ััะพะฝัะตะฝะด ะฝะฐ ะดััะณะพะผ ะดะพะผะตะฝะต - ะดะพะฑะฐะฒั ะตะณะพ ัะพะถะต
- ะะพะถะฝะพ ะฝะตัะบะพะปัะบะพ ัะตัะตะท ะทะฐะฟัััั: `https://app1.onrender.com,https://app2.onrender.com`

---

## ๐ฏ ะฏะฝะดะตะบั ะฟะตัะตะผะตะฝะฝัะต (ะดะปั ัะบะพะฝะพะผะธะธ 90%)

### 5. **YANDEX_API_KEY** (ัะตะบะพะผะตะฝะดัะตััั!)
```
Key: YANDEX_API_KEY
Value: AQVNxxxxxxxxxxxxx
```
- **ะัะพัะต ัะตะผ IAM ัะพะบะตะฝ!** ะะต ะธััะตะบะฐะตั.
- ะะฐะบ ะฟะพะปััะธัั: ัะผ. `backend/YANDEX_API_KEY_SETUP.md`
- ะะปะธ ะธัะฟะพะปัะทัะน ััะฐััะน ะฒะฐัะธะฐะฝั ั IAM ัะพะบะตะฝะพะผ (ะฝะธะถะต)

---

### 6. **YANDEX_FOLDER_ID** (ะพะฟัะธะพะฝะฐะปัะฝะพ)
```
Key: YANDEX_FOLDER_ID
Value: b1gxxxxxxxxxxxxx
```
- ะะฟัะธะพะฝะฐะปัะฝะพ! ะะพะถะตั ะฑััั ะฒัััะพะตะฝ ะฒ API ะบะปัั
- ะะพะปััะธ: `yc config get folder-id` (ะฒ ัะตัะผะธะฝะฐะปะต)

---

### 7. **YANDEX_IAM_TOKEN** (ะฐะปััะตัะฝะฐัะธะฒะฐ API ะบะปััั)
```
Key: YANDEX_IAM_TOKEN
Value: t1.xxxxxxxxxxxxx
```
- ะะปััะตัะฝะฐัะธะฒะฐ API ะบะปััั (ะตัะปะธ ะฝะต ะธัะฟะพะปัะทัะตัั API ะบะปัั)
- ะะพะปััะธ: `yc iam create-token` (ะฒ ัะตัะผะธะฝะฐะปะต)
- โ๏ธ **ะััะตะบะฐะตั ัะตัะตะท 12 ัะฐัะพะฒ!** ะัััะต ะธัะฟะพะปัะทะพะฒะฐัั API ะบะปัั

---

### 8. **YANDEX_AI_STUDIO_CLASSIFIER_ID** (ะพะฟัะธะพะฝะฐะปัะฝะพ)
```
Key: YANDEX_AI_STUDIO_CLASSIFIER_ID
Value: classifier-xxxxx
```
- ID ะบะปะฐััะธัะธะบะฐัะพัะฐ ะธะท https://studio.yandex.cloud
- ะัะปะธ ะฝะต ะฝะฐัััะพะตะฝ - ะธัะฟะพะปัะทัะตััั LLM ะบะปะฐััะธัะธะบะฐัะธั

---

### 9. **YANDEX_GPT_MODEL** (ะพะฟัะธะพะฝะฐะปัะฝะพ)
```
Key: YANDEX_GPT_MODEL
Value: yandexgpt-pro/latest
```
- ะะปะธ `yandexgpt/latest` ะดะปั ะดะตัะตะฒะปะต
- ะะพ ัะผะพะปัะฐะฝะธั ัะถะต `yandexgpt-pro/latest` ะฒ render.yaml

---

## ๐ ะัะธะผะตั ะทะฐะฟะพะปะฝะตะฝะธั ะฒ Render

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Environment Variables                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Key: DATABASE_URL                    โ
โ Value: postgresql://...              โ
โ [Add]                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Key: OPENROUTER_API_KEY             โ
โ Value: sk-or-v1-...                 โ
โ [Add]                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Key: JWT_SECRET_KEY                 โ
โ Value: a1b2c3d4e5f6...              โ
โ [Add]                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Key: CORS_ORIGINS                   โ
โ Value: https://my-app.onrender.com  โ
โ [Add]                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Key: YANDEX_API_KEY                 โ
โ Value: AQVNxxxxxxxxxxxxx            โ
โ [Add]                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Key: YANDEX_AI_STUDIO_CLASSIFIER_ID โ
โ Value: classifier-xxxxx             โ
โ [Add]                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```
**ะัะธะผะตัะฐะฝะธะต:** Folder ID ะธ IAM ัะพะบะตะฝ ะฑะพะปััะต ะฝะต ะพะฑัะทะฐัะตะปัะฝั, ะตัะปะธ ะธัะฟะพะปัะทัะตัั API ะบะปัั!
```

---

## โ ะงะตะบะปะธัั

ะะพัะปะต ะดะพะฑะฐะฒะปะตะฝะธั ะฒัะตั ะฟะตัะตะผะตะฝะฝัั:

- [ ] ะัะต ะฟะตัะตะผะตะฝะฝัะต ะดะพะฑะฐะฒะปะตะฝั
- [ ] ะะฐะถะฐะป "Save Changes"
- [ ] Render ะฟะตัะตะทะฐะฟัััะธะป ัะตัะฒะธั
- [ ] ะัะพะฒะตัะธะป ะปะพะณะธ - ะฝะตั ะพัะธะฑะพะบ
- [ ] ะัะพะฒะตัะธะป API - `/health` ะฒะพะทะฒัะฐัะฐะตั `{"status": "ok"}`

---

## ๐ ะะตะฝะตัะฐัะธั JWT_SECRET_KEY

### ะ ัะตัะผะธะฝะฐะปะต (Mac/Linux):
```bash
openssl rand -hex 32
```

### ะะปะธ ะพะฝะปะฐะนะฝ:
- https://randomkeygen.com/
- ะัะฑะตัะธ "CodeIgniter Encryption Keys"
- ะกะบะพะฟะธััะน ะปัะฑะพะน ะบะปัั (ะผะธะฝะธะผัะผ 32 ัะธะผะฒะพะปะฐ)

---

## ๐จ ะะฐะถะฝะพ ะดะปั Production

### โ ะัะฟะพะปัะทัะน API ะบะปัั (ัะตะบะพะผะตะฝะดัะตััั!)
API ะบะปัั **ะฝะต ะธััะตะบะฐะตั** (ะฒ ะพัะปะธัะธะต ะพั IAM ัะพะบะตะฝะฐ, ะบะพัะพััะน ะธััะตะบะฐะตั ัะตัะตะท 12 ัะฐัะพะฒ).

### ะะปััะตัะฝะฐัะธะฒั:

1. **ะัะฟะพะปัะทะพะฒะฐัั API ะบะปัั** (ัะตะบะพะผะตะฝะดัะตััั!)
   - ะกะพะทะดะฐะน Service Account ะฒ Yandex Cloud
   - ะกะพะทะดะฐะน API ะบะปัั ะดะปั Service Account
   - ะะพะฑะฐะฒั ะฒ Render: `YANDEX_API_KEY=AQVN...`
   - **ะะพัะพะฒะพ!** ะะปัั ะฝะต ะธััะตะบะฐะตั

2. **ะัะฟะพะปัะทะพะฒะฐัั ัะพะปัะบะพ OpenRouter** (ะฟัะพัะต)
   - ะัะพััะพ ะฝะต ะดะพะฑะฐะฒะปัะน Yandex ะฟะตัะตะผะตะฝะฝัะต
   - ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธัะฟะพะปัะทัะตั OpenRouter

3. **ะัะฟะพะปัะทะพะฒะฐัั IAM ัะพะบะตะฝ** (ะฝะต ัะตะบะพะผะตะฝะดัะตััั ะดะปั production)
   - ะััะตะบะฐะตั ัะตัะตะท 12 ัะฐัะพะฒ
   - ะัะถะฝะพ ะพะฑะฝะพะฒะปััั ะฒัััะฝัั ะธะปะธ ัะตัะตะท cron

---

## ๐งช ะัะพะฒะตัะบะฐ ะฟะพัะปะต ะดะตะฟะปะพั

### 1. ะัะพะฒะตัั ะปะพะณะธ ะฒ Render:
ะะพะปะถะฝั ัะฒะธะดะตัั:
```
โ Using Yandex embeddings (ะปัััะต ะดะปั ััััะบะพะณะพ!)
โ Using YandexGPT for planning (10x ะดะตัะตะฒะปะต!)
```

ะะปะธ (ะตัะปะธ ะฏะฝะดะตะบั ะฝะต ะฝะฐัััะพะตะฝ):
```
Using OpenRouter for planning
Using OpenAI embeddings (OpenRouter)
```

### 2. ะัะพะฒะตัั API:
```bash
curl https://ัะฒะพะน-ะฑัะบะตะฝะด.onrender.com/health
# ะะพะปะถะตะฝ ะฒะตัะฝััั: {"status": "ok"}
```

### 3. ะัะพะฒะตัั ะฐะฒัะพัะธะทะฐัะธั:
- ะะพะฟัะพะฑัะน ะทะฐัะตะณะธัััะธัะพะฒะฐัััั ัะตัะตะท ััะพะฝัะตะฝะด
- ะะพะปะถะฝะพ ัะฐะฑะพัะฐัั ะฑะตะท ะพัะธะฑะพะบ

---

## ๐ ะงะฐัััะต ะฟัะพะฑะปะตะผั

### "YANDEX_FOLDER_ID not set"
**ะะตัะตะฝะธะต:** ะะต ะบัะธัะธัะฝะพ! ะกะธััะตะผะฐ ัะฐะฑะพัะฐะตั ัะตัะตะท OpenRouter. ะัะปะธ ัะพัะตัั ะฏะฝะดะตะบั - ะดะพะฑะฐะฒั ะฟะตัะตะผะตะฝะฝัะต.

### "JWT_SECRET_KEY is too short"
**ะะตัะตะฝะธะต:** ะัะฟะพะปัะทัะน ะผะธะฝะธะผัะผ 32 ัะธะผะฒะพะปะฐ. ะกะณะตะฝะตัะธััะน ะฝะพะฒัะน: `openssl rand -hex 32`

### "CORS error"
**ะะตัะตะฝะธะต:** ะัะพะฒะตัั `CORS_ORIGINS` - ะดะพะปะถะตะฝ ะฒะบะปััะฐัั ัะพัะฝัะน URL ััะพะฝัะตะฝะดะฐ (ั https://)

### "Database connection failed"
**ะะตัะตะฝะธะต:** ะัะพะฒะตัั `DATABASE_URL` - ะดะพะปะถะตะฝ ะฑััั ะฟัะฐะฒะธะปัะฝัะน ัะพัะผะฐั PostgreSQL connection string

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

- **ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั**: `backend/RENDER_ENV_VARIABLES.md`
- **ะััััะฐั ะฝะฐัััะพะนะบะฐ**: `backend/RENDER_QUICK_SETUP.md`
- **ะะฝัะตะณัะฐัะธั ะฏะฝะดะตะบั**: `backend/YANDEX_INTEGRATION.md`

---

## ๐ฏ ะะธะฝะธะผะฐะปัะฝัะน ะฝะฐะฑะพั (ะฑะตะท ะฏะฝะดะตะบั)

ะัะปะธ ัะพัะตัั ะฑััััะพ ะทะฐะฟัััะธัั ะฑะตะท ะฏะฝะดะตะบั:

```
โ DATABASE_URL
โ OPENROUTER_API_KEY
โ JWT_SECRET_KEY
โ CORS_ORIGINS
```

ะััะฐะปัะฝะพะต ะพะฟัะธะพะฝะฐะปัะฝะพ! ะกะธััะตะผะฐ ะฑัะดะตั ัะฐะฑะพัะฐัั ัะตัะตะท OpenRouter.
