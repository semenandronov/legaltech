# Отладка ошибки 405 Method Not Allowed

## Проблема
POST запросы к `/api/upload` возвращают 405 Method Not Allowed

## Возможные причины

1. **На Render еще не обновился код** - нужно дождаться деплоя или запустить Manual Deploy
2. **Кэш браузера** - попробуйте Ctrl+Shift+R (жесткая перезагрузка)
3. **Проблема с порядком роутов** - хотя код выглядит правильно

## Что проверить

### 1. Проверьте, что код обновился на Render

Откройте в браузере:
```
https://legaltech-ynit.onrender.com/api/debug/routes
```

Должны увидеть список всех роутов. Проверьте, что есть:
- `POST /api/upload`
- `GET /api/chat/{case_id}/history`
- и т.д.

### 2. Проверьте логи Render

В логах должны быть видны:
- Установка зависимостей
- Сборка frontend
- Запуск uvicorn
- **Важно**: Проверьте, что нет ошибок при импорте модулей

### 3. Проверьте, что таблицы созданы

Если видите ошибки про отсутствующие таблицы, запустите в Render Shell:
```bash
cd backend && python init_db_force.py
```

## Решение

Если после деплоя ошибка все еще есть:

1. **Проверьте debug endpoint**: `https://legaltech-ynit.onrender.com/api/debug/routes`
2. **Проверьте логи Render** - там должна быть информация о том, какой роут обрабатывает запрос
3. **Попробуйте жесткую перезагрузку** браузера (Ctrl+Shift+R)

## Если ничего не помогает

Возможно, нужно пересоздать сервис на Render с нуля, чтобы убедиться, что все настройки правильные.

