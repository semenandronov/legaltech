# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Yandex vs LangChain –≤ –ø—Ä–æ–µ–∫—Ç–µ

## üìä –û–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞

### ‚úÖ **Yandex –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ü–û–°–¢–û–Ø–ù–ù–û** (–≤—Å–µ–≥–¥–∞, –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫)

#### 1. **ChatYandexGPT (LLM)** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –í–°–ï–ì–î–ê
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—Å–µ LLM –≤—ã–∑–æ–≤—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
   - **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
     - ‚úÖ `supervisor.py` - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤
     - ‚úÖ `timeline_node.py` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
     - ‚úÖ `key_facts_node.py` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–∫—Ç–æ–≤
     - ‚úÖ `discrepancy_node.py` - –ø–æ–∏—Å–∫ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π
     - ‚úÖ `risk_node.py` - –∞–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤
     - ‚úÖ `summary_node.py` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∑—é–º–µ
     - ‚úÖ `entity_extraction_node.py` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π
     - ‚úÖ `privilege_check_node.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
     - ‚úÖ `relationship_node.py` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–µ–π
     - ‚úÖ `document_classifier_node.py` - –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
     - ‚úÖ `planning_agent.py` - –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞
     - ‚úÖ `rag_service.py` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –≤ RAG (–ø—Ä–∏ pgvector)
     - ‚úÖ `routes/chat.py` - —á–∞—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

#### 2. **YandexEmbeddings (Embeddings)** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –í–°–ï–ì–î–ê
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π —Ç–µ–∫—Å—Ç–∞
   - **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
     - ‚úÖ `document_processor.py` - —Å–æ–∑–¥–∞–Ω–∏–µ embeddings –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
     - ‚úÖ `pgvector_store.py` - —Å–æ–∑–¥–∞–Ω–∏–µ embeddings –¥–ª—è pgvector (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

### ‚ùå **Yandex Vector Store/Assistant - –£–î–ê–õ–ï–ù–û**

#### 1. **YandexIndexService (Vector Store)** - —É–¥–∞–ª–µ–Ω–æ
   - **–°—Ç–∞—Ç—É—Å**: –ö–æ–¥ —É–¥–∞–ª–µ–Ω, –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   - **–ü—Ä–∏—á–∏–Ω–∞**: –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞ pgvector –¥–ª—è production

#### 2. **YandexAssistantService (Assistant API)** - —É–¥–∞–ª–µ–Ω–æ
   - **–°—Ç–∞—Ç—É—Å**: –ö–æ–¥ —É–¥–∞–ª–µ–Ω, –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   - **–ü—Ä–∏—á–∏–Ω–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ–π RAG —Å pgvector + YandexGPT

---

### üîß **LangChain –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ü–û–°–¢–û–Ø–ù–ù–û** (–≤—Å–µ–≥–¥–∞)

#### 1. **LangGraph** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ workflow –º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
   - **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
     - ‚úÖ `langchain_agents/graph.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞—Ñ
     - ‚úÖ `langchain_agents/coordinator.py` - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
     - ‚úÖ `langchain_agents/state.py` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ state
     - ‚úÖ `langchain_agents/supervisor.py` - —Å—É–ø–µ—Ä–≤–∏–∑–æ—Ä –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
     - ‚úÖ PostgresSaver –¥–ª—è checkpointing (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)

#### 2. **LangChain Document Loaders** - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ñ–∞–π–ª–æ–≤
   - **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
     - ‚úÖ `langchain_loaders.py` - PDF, DOCX, TXT, XLSX
     - ‚úÖ `routes/upload.py` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

#### 3. **LangChain Text Splitters** - —Ä–∞–∑–±–∏–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–∑–±–∏–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ chunks
   - **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
     - ‚úÖ `document_processor.py` - RecursiveCharacterTextSplitter (chunk_size=1000, overlap=200)

#### 4. **LangChain Documents** - —Ä–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ LangChain
   - **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
     - ‚úÖ –í–µ–∑–¥–µ, –≥–¥–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç—ã (Document objects —Å metadata)

#### 5. **LangChain Prompts** - –ø—Ä–æ–º–ø—Ç—ã
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è LLM
   - **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
     - ‚úÖ `langchain_agents/prompts.py` - –≤—Å–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
     - ‚úÖ –í—Å–µ –∞–≥–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç ChatPromptTemplate

#### 6. **LangChain Retrievers** - –ø–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
     - ‚úÖ `langchain_retrievers.py` - MultiQuery, Compression, Ensemble retrievers
     - ‚úÖ `rag_service.py` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ retrievers

#### 7. **PGVector (langchain-postgres)** - vector store
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ embeddings –≤ PostgreSQL —Å pgvector
   - **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
     - ‚úÖ `pgvector_store.py` - –µ—Å–ª–∏ `VECTOR_STORE_TYPE=pgvector` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
     - ‚úÖ `document_processor.py` - –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ pgvector

#### 8. **LangChain Chains** - —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥
   - **–°—Ç–∞—Ç—É—Å**: Deprecated, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ
   - **–ì–¥–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ**:
     - ‚ö†Ô∏è `langchain_chains.py` - ChainService (–ø–æ–º–µ—á–µ–Ω –∫–∞–∫ deprecated)

---

## üéØ –†–µ–∑—é–º–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (VECTOR_STORE_TYPE=pgvector)

### ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
1. **YandexGPT** (ChatYandexGPT) - –¥–ª—è –≤—Å–µ—Ö LLM –≤—ã–∑–æ–≤–æ–≤
2. **YandexEmbeddings** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è embeddings
3. **LangGraph** - –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤
4. **LangChain Loaders** - –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
5. **LangChain Splitters** - –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
6. **PGVector** - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è embeddings (—á–µ—Ä–µ–∑ langchain-postgres)

### ‚ùå –£–î–ê–õ–ï–ù–û (–∫–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω):
1. **YandexIndexService** - —É–¥–∞–ª–µ–Ω –∏–∑ document_processor.py –∏ routes/upload.py
2. **YandexAssistantService** - —É–¥–∞–ª–µ–Ω –∏–∑ rag_service.py –∏ routes/upload.py
3. **VECTOR_STORE_TYPE** - —É–¥–∞–ª–µ–Ω –∏–∑ config.py (—Ç–æ–ª—å–∫–æ pgvector)

---

## üìù –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ RAG (—Å pgvector)

```
User Query
    ‚Üì
RAGService.retrieve_context()
    ‚Üì (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç document_processor)
PGVector.similarity_search() [LangChain]
    ‚Üì (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç YandexEmbeddings)
YandexEmbeddings.embed_query() [Yandex]
    ‚Üì
Retrieved Documents [LangChain Documents]
    ‚Üì
RAGService._generate_with_direct_rag()
    ‚Üì (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç ChatYandexGPT)
ChatYandexGPT.invoke() [Yandex]
    ‚Üì
Answer + Sources
```

---

## ‚ùå –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (VECTOR_STORE_TYPE=yandex) - –£–î–ê–õ–ï–ù–ê

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è. –í—Å–µ –¥–µ–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç pgvector.

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Yandex SDK:
- `yandex-cloud-ml-sdk` - –¥–ª—è YandexGPT, Embeddings, Index, Assistant
- `yandexcloud` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ SDK

### LangChain:
- `langchain` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `langchain-core` - –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã
- `langchain-community` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `langgraph` - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- `langgraph-checkpoint-postgres` - checkpointing
- `langchain-postgres` - PGVector –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- `pgvector` - PostgreSQL —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–æ–≤

---

## üéØ –ò—Ç–æ–≥–æ

**Yandex** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
- ‚úÖ LLM (–≤—Å–µ–≥–¥–∞) - ChatYandexGPT
- ‚úÖ Embeddings (–≤—Å–µ–≥–¥–∞) - YandexEmbeddings
- ‚ùå Vector Store - —É–¥–∞–ª–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ–º pgvector)
- ‚ùå Assistant API - —É–¥–∞–ª–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ–π RAG)

**LangChain** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
- ‚úÖ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤ (LangGraph)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –†–∞–∑–±–∏–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- ‚úÖ –ü—Ä–æ–º–ø—Ç—ã
- ‚úÖ Retrievers
- ‚úÖ PGVector –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ø—Ä–∏ pgvector)

**–ö–æ–º–±–∏–Ω–∞—Ü–∏—è**: Yandex –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç LLM –∏ Embeddings, LangChain –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—é.

