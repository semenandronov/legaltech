# Настройка Yandex Cloud API

Для работы модуля хронологии с изображениями, аудио и видео файлами необходимо настроить Yandex Cloud API.

## Шаги настройки

### 1. Создание аккаунта Yandex Cloud

1. Перейдите на https://cloud.yandex.ru/
2. Зарегистрируйтесь или войдите в аккаунт
3. Создайте новый каталог (folder)

### 2. Получение API ключа или IAM токена

**Вариант 1: OAuth токен (для разработки)**
1. Перейдите в раздел "IAM" → "OAuth токены"
2. Создайте новый OAuth токен
3. Скопируйте токен

**Вариант 2: Service Account (для продакшена)**
1. Создайте Service Account
2. Назначьте роли: `ai.languageModels.user`, `vision.user`, `speechkit.stt.user`
3. Создайте ключ для Service Account
4. Получите IAM токен

### 3. Включение необходимых сервисов

Включите следующие сервисы в Yandex Cloud:
- **Yandex Vision** - для обработки изображений и PDF
- **Yandex SpeechKit** - для обработки аудио/видео
- **Yandex Document Parser** - для структурированных документов

### 4. Настройка переменных окружения

Добавьте в файл `.env`:

```env
# Yandex Cloud
YANDEX_API_KEY="ваш-oauth-токен"
YANDEX_FOLDER_ID="ваш-folder-id"
# ИЛИ используйте IAM токен напрямую:
YANDEX_IAM_TOKEN="ваш-iam-токен"
```

### 5. Получение Folder ID

1. В консоли Yandex Cloud перейдите в ваш каталог
2. Folder ID можно найти в URL или в настройках каталога

## Использование

После настройки модуль хронологии автоматически будет использовать Yandex API для:
- Извлечения текста из изображений (JPG, PNG, GIF, BMP, TIFF)
- Извлечения текста из PDF файлов
- Распознавания речи из аудио файлов (MP3, WAV, OGG, M4A, FLAC)
- Обработки видео файлов (требует дополнительной настройки)

Если Yandex API не настроен, система будет использовать локальные парсеры для поддерживаемых форматов (PDF, DOCX, TXT).

## Ограничения

- Бесплатный тариф Yandex Cloud имеет лимиты на количество запросов
- Для больших объемов данных рекомендуется использовать платный тариф
- Видео файлы требуют предварительного извлечения аудиодорожки

