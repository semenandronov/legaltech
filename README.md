# Legal AI Assistant

Веб-приложение для анализа судебных документов с использованием AI.

## Возможности

- **Суммирование документов**: Создание кратких резюме юридических документов с извлечением ключевых элементов
- **E-Discovery**: Быстрый поиск по множественным документам с использованием текстового и семантического поиска
- **Хронология событий**: Создание упорядоченных временных шкал событий из документов (с поддержкой изображений, аудио, видео через Yandex API)
- **Чат с ИИ**: Контекстный ассистент для вопросов по документам с цитированием источников
- **Табличный поиск**: Автоматическое извлечение данных из документов в таблицу

## Технологический стек

- **Frontend**: Next.js 15, React, TypeScript, TailwindCSS, Shadcn/ui
- **Backend**: Next.js API Routes, Prisma ORM
- **База данных**: PostgreSQL с pgvector
- **AI**: OpenAI API (GPT-4o) с моками для разработки
- **Обработка файлов**: Yandex Cloud API (Vision, SpeechKit, Document Parser)
- **Аутентификация**: NextAuth.js

## Установка

### Локальная установка

1. Клонируйте репозиторий
2. Установите зависимости:
```bash
npm install
```

3. Настройте переменные окружения:
```bash
cp .env.example .env
```

Заполните `.env` файл:
```env
DATABASE_URL="postgresql://user:password@localhost:5432/legal_ai"
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key"
OPENAI_API_KEY="your-openai-api-key" # опционально, для использования моков оставьте пустым
YANDEX_API_KEY="your-yandex-oauth-token" # опционально, для обработки изображений/аудио
YANDEX_FOLDER_ID="your-folder-id" # опционально
```

4. Запустите PostgreSQL с pgvector:
```bash
docker-compose up -d
```

5. Выполните миграции базы данных:
```bash
npx prisma migrate dev
npx prisma generate
```

6. Запустите сервер разработки:
```bash
npm run dev
```

Откройте [http://localhost:3000](http://localhost:3000) в браузере.

### Запуск в Replit

Подробные инструкции см. в [README_REPLIT.md](README_REPLIT.md)

**Быстрый старт:**
1. Импортируйте репозиторий в Replit
2. Установите зависимости: `npm install`
3. Настройте переменные окружения в Secrets
4. Настройте базу данных (внешнюю или SQLite)
5. Выполните миграции: `npx prisma migrate dev`
6. Запустите: `npm run dev`

## Настройка Yandex Cloud API

Для работы с изображениями, аудио и видео файлами необходимо настроить Yandex Cloud API. 
Подробные инструкции см. в [YANDEX_SETUP.md](YANDEX_SETUP.md)

## Структура проекта

```
legal-ai-assistant/
├── app/                    # Next.js App Router
│   ├── (auth)/            # Страницы аутентификации
│   ├── (dashboard)/       # Защищенные страницы
│   │   ├── chat/         # Чат с ИИ
│   │   ├── tabular/      # Табличный поиск
│   │   └── ...
│   └── api/               # API endpoints
│       ├── chat/         # API для чата
│       ├── tabular/      # API для табличного поиска
│       └── ...
├── components/            # React компоненты
├── lib/                   # Утилиты и хелперы
│   ├── ai/               # AI интеграции
│   ├── yandex/           # Yandex API интеграции
│   ├── parsers/          # Парсеры файлов
│   └── ...
├── prisma/               # Prisma схема
└── types/                # TypeScript типы
```

## Использование

### Суммирование документов

1. Перейдите в раздел "Суммирование"
2. Загрузите файл или вставьте текст документа
3. Выберите длину резюме
4. Нажмите "Получить резюме"

### E-Discovery

1. Перейдите в раздел "E-Discovery"
2. Загрузите несколько документов
3. Введите поисковый запрос
4. Выберите тип поиска (текстовый, семантический, гибридный)
5. Нажмите "Выполнить поиск"

### Хронология событий

1. Перейдите в раздел "Хронология"
2. Загрузите документы (PDF, изображения, аудио, видео - через Yandex API)
3. Вставьте текст с датами и событиями
4. Нажмите "Создать хронологию"
5. Просмотрите упорядоченную временную шкалу

### Чат с ИИ

1. Перейдите в раздел "Чат с ИИ"
2. Загрузите документы для контекста (через E-Discovery)
3. Задавайте вопросы по документам
4. Получайте ответы с цитированием источников

### Табличный поиск

1. Перейдите в раздел "Табличный поиск"
2. Создайте новую таблицу
3. Выберите документы для анализа
4. Добавьте колонки с запросами (например: "Сумма контракта", "Срок доставки")
5. Запустите обработку
6. Просмотрите результаты в таблице

## Разработка

Проект использует моки для AI функций, если не указан `OPENAI_API_KEY`. Это позволяет разрабатывать и тестировать без необходимости настройки OpenAI API.

Для использования реального AI:
1. Получите API ключ от OpenAI
2. Добавьте его в `.env` файл
3. Перезапустите сервер

## Лицензия

MIT
