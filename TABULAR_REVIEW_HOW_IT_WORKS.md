# –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Tabular Review - –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üéØ –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

**Tabular Review** –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Ç–∞–±–ª–∏—Ü—É, –≥–¥–µ:
- **–°—Ç—Ä–æ–∫–∞** = –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç
- **–ö–æ–ª–æ–Ω–∫–∞** = –≤–æ–ø—Ä–æ—Å –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ö–∞–∫–∞—è —Å—É–º–º–∞?", "–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è?")
- **–Ø—á–µ–π–∫–∞** = –æ—Ç–≤–µ—Ç AI –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

---

## üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Tabular Review

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ–ª–æ (case) —Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Tabular Review" –∏–ª–∏ –ø–æ —Å—Å—ã–ª–∫–µ `/cases/{caseId}/tabular-review`

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏:**
```
1. Frontend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É–∂–µ review –¥–ª—è —ç—Ç–æ–≥–æ –¥–µ–ª–∞
2. –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç POST /api/tabular-review/ —Å case_id
3. Backend —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ tabular_reviews
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç review_id
5. Frontend –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ /cases/{caseId}/tabular-review/{reviewId}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø—É—Å—Ç–æ–π Tabular Review –ø—Ä–æ–µ–∫—Ç.

---

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ (–≤–æ–ø—Ä–æ—Å–æ–≤)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
1. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "Add columns"
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏**: "Loan Type" (–∏–ª–∏ "–¢–∏–ø –∑–∞–π–º–∞")
   - **–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö**: –≤—ã–±–∏—Ä–∞–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ (text, date, currency, number, yes_no, tags, verbatim)
   - **Prompt (–≤–æ–ø—Ä–æ—Å)**: "What is the type of loan agreement?" (–∏–ª–∏ "–ö–∞–∫–æ–π —Ç–∏–ø –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞?")
3. –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏:**
```
1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /api/tabular-review/{reviewId}/columns
   {
     column_label: "Loan Type",
     column_type: "text",
     prompt: "What is the type of loan agreement?"
   }

2. Backend (TabularReviewService.add_column):
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
   - –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ tabular_columns
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç order_index (–ø–æ—Ä—è–¥–æ–∫ –∫–æ–ª–æ–Ω–∫–∏)
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î

3. Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É, –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í —Ç–∞–±–ª–∏—Ü–µ –ø–æ—è–≤–∏–ª–∞—Å—å –Ω–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ "Loan Type", –Ω–æ —è—á–µ–π–∫–∏ –µ—â–µ –ø—É—Å—Ç—ã–µ (–ø–æ–∫–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞).

---

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (Run All)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
1. –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "Loan Type", "Amount", "Due Date", "Parties")
2. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "Run all"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ (–ü–ê–†–ê–õ–õ–ï–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê):**

```
1. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /api/tabular-review/{reviewId}/run

2. Backend (TabularReviewService.run_extraction):
   a) –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –¥–µ–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
   b) –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5 –∫–æ–ª–æ–Ω–æ–∫)
   c) –°–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á–∏: 100 —Ñ–∞–π–ª–æ–≤ √ó 5 –∫–æ–ª–æ–Ω–æ–∫ = 500 –∑–∞–¥–∞—á
   
   d) –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–û –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–¥–∞—á–∏:
      –¥–ª—è –∫–∞–∂–¥–æ–≥–æ (—Ñ–∞–π–ª, –∫–æ–ª–æ–Ω–∫–∞):
        - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞
        - –§–æ—Ä–º–∏—Ä—É–µ—Ç prompt –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–ª–æ–Ω–∫–∏
        - –í—ã–∑—ã–≤–∞–µ—Ç YandexGPT –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ tabular_cells
   
   e) –ò—Å–ø–æ–ª—å–∑—É–µ—Ç asyncio.gather() –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç–∏:
      results = await asyncio.gather(*tasks)
      # –í—Å–µ 500 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –∞ –Ω–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ!
   
   f) –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
      - cell_value: –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
      - verbatim_extract: —Ç–æ—á–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞ (–µ—Å–ª–∏ —Ç–∏–ø verbatim)
      - reasoning: –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ AI
      - confidence_score: —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0.0-1.0)

3. –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å review: "processing" ‚Üí "completed"

4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
   {
     status: "completed",
     saved_count: 495,
     error_count: 5,
     total_tasks: 500
   }
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–∞–±–ª–∏—Ü–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏! –ö–∞–∂–¥–∞—è —è—á–µ–π–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–∑–≤–ª–µ—á–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```
| Document          | Loan Type | Amount    | Due Date  | Parties         |
|-------------------|-----------|-----------|-----------|-----------------|
| contract_001.pdf  | Term Loan | $500,000  | 2025-12-31| ABC Corp, XYZ LLC|
| contract_002.pdf  | Line of Credit | $1M | 2026-06-30| DEF Inc         |
| ...               | ...       | ...       | ...       | ...             |
```

---

### –®–∞–≥ 4: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
1. –í–∏–¥–∏—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É —Å–æ –≤—Å–µ–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
2. –ú–æ–∂–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏ (–∫–ª–∏–∫ –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫)
3. –ú–æ–∂–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å (–ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º)
4. –ú–æ–∂–µ—Ç —Å–∫—Ä—ã–≤–∞—Ç—å/–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏:**
```
1. Frontend –≤—ã–∑—ã–≤–∞–µ—Ç GET /api/tabular-review/{reviewId}/table-data

2. Backend (TabularReviewService.get_table_data):
   a) –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –¥–µ–ª–∞
   b) –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏ (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ order_index)
   c) –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —è—á–µ–π–∫–∏ (tabular_cells)
   d) –°—Ç—Ä–æ–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö:
      {
        review: { id, name, status },
        columns: [
          { id, label: "Loan Type", type: "text", ... },
          { id, label: "Amount", type: "currency", ... },
          ...
        ],
        rows: [
          {
            file_id: "xxx",
            file_name: "contract_001.pdf",
            cells: {
              "column_id_1": { cell_value: "Term Loan", ... },
              "column_id_2": { cell_value: "$500,000", ... },
              ...
            }
          },
          ...
        ]
      }

3. Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TanStack Table –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
   - –°–æ–∑–¥–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö API
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞–∂–¥—É—é —è—á–µ–π–∫—É –∫–∞–∫ –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

---

### –®–∞–≥ 5: Cell Expansion (—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ —è—á–µ–π–∫–∏)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
1. –ö–ª–∏–∫–∞–µ—Ç –Ω–∞ –ª—é–±—É—é —è—á–µ–π–∫—É –≤ —Ç–∞–±–ª–∏—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ "Term Loan" –∏–ª–∏ "$500,000")
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏:**
```
1. Frontend –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω–∞ –∫–∞–∫—É—é —è—á–µ–π–∫—É –∫–ª–∏–∫–Ω—É–ª–∏:
   - file_id (–∫–∞–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç)
   - column_id (–∫–∞–∫–∞—è –∫–æ–ª–æ–Ω–∫–∞)

2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç GET /api/tabular-review/{reviewId}/cell/{file_id}/{column_id}

3. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª–∏:
   {
     cell_value: "Term Loan",
     verbatim_extract: "This Agreement is a term loan agreement...",
     reasoning: "The document contains a clear loan type specification...",
     confidence_score: 0.95,
     source_page: 3,
     source_section: "Section 1. Definitions"
   }

4. Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤ –º–æ–¥–∞–ª–∫–µ:
   - –ò—Å—Ö–æ–¥–Ω—ã–π –æ—Ç–≤–µ—Ç
   - –¢–æ—á–Ω—É—é —Ü–∏—Ç–∞—Ç—É (verbatim extract)
   - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ AI (reasoning)
   - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (confidence score) —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π
   - –ò—Å—Ç–æ—á–Ω–∏–∫ (—Ñ–∞–π–ª, —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —Ä–∞–∑–¥–µ–ª)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç, –æ—Ç–∫—É–¥–∞ –≤–∑—è–ª—Å—è –æ—Ç–≤–µ—Ç, –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫.

---

### –®–∞–≥ 6: –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
1. –ù–∞–∂–∏–º–∞–µ—Ç "Download" ‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç "Excel" –∏–ª–∏ "CSV"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏:**

**–î–ª—è CSV:**
```
1. Frontend –≤—ã–∑—ã–≤–∞–µ—Ç POST /api/tabular-review/{reviewId}/export/csv
2. Backend (TabularReviewService.export_to_csv):
   - –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ get_table_data()
   - –§–æ—Ä–º–∏—Ä—É–µ—Ç CSV:
     Document,Loan Type,Amount,Due Date,Parties
     contract_001.pdf,Term Loan,$500,000,2025-12-31,ABC Corp
     ...
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç CSV —Ñ–∞–π–ª
3. Frontend —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª
```

**–î–ª—è Excel:**
```
1. Frontend –≤—ã–∑—ã–≤–∞–µ—Ç POST /api/tabular-review/{reviewId}/export/excel
2. Backend (TabularReviewService.export_to_excel):
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç openpyxl –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Excel —Ñ–∞–π–ª–∞
   - –°–æ–∑–¥–∞–µ—Ç –ª–∏—Å—Ç "Tabular Review"
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–∂–∏—Ä–Ω—ã–º)
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–±–∏—Ä–∞–µ—Ç —à–∏—Ä–∏–Ω—É –∫–æ–ª–æ–Ω–æ–∫
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç .xlsx —Ñ–∞–π–ª
3. Frontend —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç Excel/CSV —Ñ–∞–π–ª —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

---

## üîÑ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã (–ø—Ä–∏–º–µ—Ä)

**–°—Ü–µ–Ω–∞—Ä–∏–π: –ê–Ω–∞–ª–∏–∑ 50 –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤**

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è 50 PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –¥–µ–ª–æ
   - –°–æ–∑–¥–∞–µ—Ç—Å—è Tabular Review

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–æ–Ω–æ–∫:**
   ```
   –ö–æ–ª–æ–Ω–∫–∞ 1: "Borrower Name" (text)
   –ö–æ–ª–æ–Ω–∫–∞ 2: "Loan Amount" (currency)
   –ö–æ–ª–æ–Ω–∫–∞ 3: "Interest Rate" (number)
   –ö–æ–ª–æ–Ω–∫–∞ 4: "Maturity Date" (date)
   –ö–æ–ª–æ–Ω–∫–∞ 5: "Key Terms" (verbatim)
   ```

3. **–ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
   - 50 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ √ó 5 –∫–æ–ª–æ–Ω–æ–∫ = 250 –∑–∞–¥–∞—á
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ YandexGPT
   - –í—Ä–µ–º—è: ~5-10 –º–∏–Ω—É—Ç (–≤–º–µ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–Ω–µ–π –≤—Ä—É—á–Ω—É—é)

4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –¢–∞–±–ª–∏—Ü–∞ 50 —Å—Ç—Ä–æ–∫ √ó 5 –∫–æ–ª–æ–Ω–æ–∫ = 250 –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —è—á–µ–µ–∫
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã

5. **–ê–Ω–∞–ª–∏–∑:**
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—É–º–º–µ (–Ω–∞–π—Ç–∏ —Å–∞–º—ã–µ –±–æ–ª—å—à–∏–µ –∑–∞–π–º—ã)
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ (–Ω–∞–π—Ç–∏ –∑–∞–π–º—ã, –∏—Å—Ç–µ–∫–∞—é—â–∏–µ –≤ 2025)
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π —á–µ—Ä–µ–∑ cell expansion

6. **–≠–∫—Å–ø–æ—Ä—Ç:**
   - –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
   - –î–∞–ª—å–Ω–µ–π—à–∏–π –∞–Ω–∞–ª–∏–∑ –≤ Excel/Power BI
   - –û—Ç—á–µ—Ç –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
```python
# –ù–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–º–µ–¥–ª–µ–Ω–Ω–æ):
for file in files:
    for column in columns:
        result = extract(file, column)  # 1 –∑–∞ —Ä–∞–∑

# –ê –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (–±—ã—Å—Ç—Ä–æ):
tasks = [extract(file, column) for file in files for column in columns]
results = await asyncio.gather(*tasks)  # –í—Å–µ —Å—Ä–∞–∑—É!
```

### 2. –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **currency**: "$500,000" ‚Üí –º–æ–∂–Ω–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —á–∏—Å–ª–∞
- **date**: "2025-12-31" ‚Üí –º–æ–∂–Ω–æ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ
- **yes_no**: "Yes"/"No" ‚Üí –º–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å
- **verbatim**: —Ç–æ—á–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 3. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (Auditability)
- –ö–∞–∂–¥–∞—è —è—á–µ–π–∫–∞ —Ö—Ä–∞–Ω–∏—Ç:
  - –ò—Å—Ö–æ–¥–Ω—ã–π –æ—Ç–≤–µ—Ç
  - –¢–æ—á–Ω—É—é —Ü–∏—Ç–∞—Ç—É (verbatim)
  - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ AI (reasoning)
  - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (confidence)
  - –ò—Å—Ç–æ—á–Ω–∏–∫ (—Ñ–∞–π–ª, —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

### 4. –ì–∏–±–∫–æ—Å—Ç—å
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–æ–ø—Ä–æ—Å—ã (–∫–æ–ª–æ–Ω–∫–∏)
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –∫–æ–ª–æ–Ω–∫–∏
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É

---

## üé® UI/UX Flow

```
[–°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ–ª–∞]
    ‚Üì
[–ö–Ω–æ–ø–∫–∞ "Tabular Review"] –∏–ª–∏ [–ù–∞–≤–∏–≥–∞—Ü–∏—è]
    ‚Üì
[TabularReviewPage]
    ‚îú‚îÄ‚îÄ [Toolbar]
    ‚îÇ   ‚îú‚îÄ‚îÄ Add documents
    ‚îÇ   ‚îú‚îÄ‚îÄ Add columns ‚Üí [ColumnBuilder Modal]
    ‚îÇ   ‚îú‚îÄ‚îÄ Run all ‚Üí [Processing...]
    ‚îÇ   ‚îú‚îÄ‚îÄ Download ‚Üí [CSV/Excel]
    ‚îÇ   ‚îî‚îÄ‚îÄ Share
    ‚îÇ
    ‚îî‚îÄ‚îÄ [TabularReviewTable]
        ‚îú‚îÄ‚îÄ [Table Header] (–∫–æ–ª–æ–Ω–∫–∏ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π)
        ‚îú‚îÄ‚îÄ [Table Rows] (–¥–æ–∫—É–º–µ–Ω—Ç—ã)
        ‚îÇ   ‚îî‚îÄ‚îÄ [Cell] ‚Üí [Click] ‚Üí [CellExpansionModal]
        ‚îî‚îÄ‚îÄ [Pagination]
```

---

## üìä –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î

**tabular_reviews:**
```json
{
  "id": "review-123",
  "case_id": "case-456",
  "name": "Loan Portfolio Analysis",
  "status": "completed"
}
```

**tabular_columns:**
```json
[
  {
    "id": "col-1",
    "column_label": "Loan Amount",
    "column_type": "currency",
    "prompt": "What is the total loan amount?",
    "order_index": 0
  },
  {
    "id": "col-2",
    "column_label": "Due Date",
    "column_type": "date",
    "prompt": "When does the loan mature?",
    "order_index": 1
  }
]
```

**tabular_cells:**
```json
[
  {
    "file_id": "file-789",
    "column_id": "col-1",
    "cell_value": "$500,000",
    "verbatim_extract": "The total principal amount shall be five hundred thousand dollars ($500,000)",
    "reasoning": "Found in Section 2.1, clearly states the loan amount",
    "confidence_score": 0.98,
    "source_page": 5
  }
]
```

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ë–µ–∑ Tabular Review (–≤—Ä—É—á–Ω—É—é):**
- 50 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ √ó 5 –≤–æ–ø—Ä–æ—Å–æ–≤ = 250 –∑–∞–¥–∞—á
- –í—Ä–µ–º—è –Ω–∞ –∑–∞–¥–∞—á—É: ~10 –º–∏–Ω—É—Ç (—á—Ç–µ–Ω–∏–µ + –∞–Ω–∞–ª–∏–∑ + –∑–∞–ø–∏—Å—å)
- **–û–±—â–µ–µ –≤—Ä–µ–º—è: 250 √ó 10 = 2500 –º–∏–Ω—É—Ç = ~42 —á–∞—Å–∞**

**–° Tabular Review:**
- 50 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ √ó 5 –∫–æ–ª–æ–Ω–æ–∫ = 250 –∑–∞–¥–∞—á
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –í—Ä–µ–º—è –Ω–∞ –∑–∞–¥–∞—á—É: ~2 —Å–µ–∫—É–Ω–¥—ã (API –≤—ã–∑–æ–≤)
- **–û–±—â–µ–µ –≤—Ä–µ–º—è: ~5-10 –º–∏–Ω—É—Ç** (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 250x!**

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (JWT —Ç–æ–∫–µ–Ω)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ reviews
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `user_id` –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î
- CASCADE —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–µ–ª–∞

---

## üìù –ò—Ç–æ–≥

Tabular Review - —ç—Ç–æ **"Excel –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"**:
1. –ó–∞–≥—Ä—É–∂–∞–µ—à—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
2. –ó–∞–¥–∞–µ—à—å –≤–æ–ø—Ä–æ—Å—ã (–∫–æ–ª–æ–Ω–∫–∏)
3. AI –∏–∑–≤–ª–µ–∫–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
4. –í–∏–¥–∏—à—å –≤—Å–µ –≤ —Ç–∞–±–ª–∏—Ü–µ
5. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—à—å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –ò–∑ –¥–Ω–µ–π —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã ‚Üí –≤ –º–∏–Ω—É—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏! üöÄ

