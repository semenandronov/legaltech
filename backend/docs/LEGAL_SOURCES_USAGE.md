# Использование официальных юридических источников

## Обзор

Система предоставляет инструменты для поиска на официальных юридических сайтах через Yandex Web Search API:
- **pravo.gov.ru** - официальное законодательство
- **vsrf.ru** - позиции Верховного Суда РФ
- **kad.arbitr.ru** - судебная практика (картотека арбитражных дел)

## Инструменты

### search_legislation_tool

Поиск норм права на pravo.gov.ru.

**Когда использовать:**
- Нужна конкретная статья кодекса (ГК, ГПК, АПК)
- Нужна норма права для анализа
- Нужно проверить действующее законодательство

**Пример:**
```python
result = search_legislation_tool.invoke("статья 393 ГК РФ")
```

### search_supreme_court_tool

Поиск позиций Верховного Суда РФ на vsrf.ru.

**Когда использовать:**
- Нужны разъяснения Верховного Суда
- Нужна позиция ВС по конкретному вопросу
- Нужны постановления Пленума ВС

**Пример:**
```python
result = search_supreme_court_tool.invoke("разъяснения о возмещении убытков")
```

### search_case_law_tool

Поиск судебной практики на kad.arbitr.ru.

**Когда использовать:**
- Нужны аналогичные дела
- Нужны прецеденты
- Нужна практика судов по конкретному вопросу

**Пример:**
```python
result = search_case_law_tool.invoke("решения по договорам поставки")
```

### smart_legal_search_tool

Умный поиск с автоматическим выбором источника.

**Когда использовать:**
- Не уверен, какой именно сайт нужен
- Нужна информация из нескольких источников
- Запрос общий и может быть в разных источниках

**Пример:**
```python
result = smart_legal_search_tool.invoke("форс-мажор в договорах")
```

## Формирование запросов

### Для законодательства

- **Хорошо:** "статья 393 Гражданский кодекс РФ"
- **Хорошо:** "статья 401 ГК РФ"
- **Плохо:** "что-то про убытки"

### Для ВС

- **Хорошо:** "разъяснения о возмещении убытков"
- **Хорошо:** "постановление пленума ВС о договорах"
- **Плохо:** "мнение суда"

### Для практики

- **Хорошо:** "решения по договорам поставки"
- **Хорошо:** "аналогичные дела о форс-мажоре"
- **Плохо:** "похожие случаи"

## Интеграция с агентами

Инструменты автоматически доступны всем агентам через `get_all_tools()`. Агенты сами решают, когда использовать инструменты, на основе анализа пробелов в знаниях.

## Примеры использования

### Пример 1: Поиск нормы права

```python
# Агент Risk анализирует риски
# Обнаруживает: "Нужна норма права о форс-мажоре"
# SelfAwarenessService определяет: MISSING_NORM
# Агент вызывает: search_legislation_tool.invoke("статья 401 ГК РФ")
```

### Пример 2: Поиск позиции ВС

```python
# Агент Discrepancy находит противоречие
# Обнаруживает: "Неясно толкование, нужны разъяснения ВС"
# SelfAwarenessService определяет: MISSING_COURT_POSITION
# Агент вызывает: search_supreme_court_tool.invoke("разъяснения о возмещении убытков")
```

### Пример 3: Поиск прецедентов

```python
# Агент Risk оценивает риск
# Обнаруживает: "Нужны аналогичные дела для сравнения"
# SelfAwarenessService определяет: MISSING_PRECEDENT
# Агент вызывает: search_case_law_tool.invoke("решения по договорам поставки")
```

## Обработка результатов

Результаты поиска автоматически:
- Форматируются для агента
- Валидируются через ResultValidator
- Сохраняются в LangGraph Store
- Логируются в LangSmith

## Ограничения

- Поиск работает только через Yandex Web Search API
- Требуется настройка `YANDEX_API_KEY` и `YANDEX_FOLDER_ID`
- Результаты ограничены тем, что доступно через Yandex Search

