# üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Render

## üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è Render Dashboard

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

#### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
```
DATABASE_URL=postgresql://user:password@host:5432/dbname
```
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è Render –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PostgreSQL –±–∞–∑—ã
- –ò–ª–∏ —É–∫–∞–∂–∏ —Å–≤–æ—é –≤–Ω–µ—à–Ω—é—é –ë–î

---

#### 2. **OpenRouter API** (Fallback –¥–ª—è LLM)
```
OPENROUTER_API_KEY=sk-or-v1-xxxxx
OPENROUTER_MODEL=openrouter/auto
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
```
- –ü–æ–ª—É—á–∏ –∫–ª—é—á –Ω–∞ https://openrouter.ai
- –ù—É–∂–µ–Ω –∫–∞–∫ fallback, –µ—Å–ª–∏ –Ø–Ω–¥–µ–∫—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

---

#### 3. **JWT Authentication** (–ö–†–ò–¢–ò–ß–ù–û!)
```
JWT_SECRET_KEY=—Ç–≤–æ–π-–æ—á–µ–Ω—å-–¥–ª–∏–Ω–Ω—ã–π-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440
```
- **JWT_SECRET_KEY** - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: `openssl rand -hex 32`

---

#### 4. **CORS** (–¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)
```
CORS_ORIGINS=https://—Ç–≤–æ–π-—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.onrender.com,http://localhost:3000
```
- –£–∫–∞–∂–∏ URL —Ç–≤–æ–µ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ Render
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `*` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è production!)

---

### üéØ –Ø–Ω–¥–µ–∫—Å Cloud –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### 5. **Yandex Cloud - –û—Å–Ω–æ–≤–Ω—ã–µ**
```
YANDEX_FOLDER_ID=b1gxxxxxxxxxxxxx
YANDEX_IAM_TOKEN=t1.xxxxxxxxxxxxx
```
- **YANDEX_FOLDER_ID** - ID –ø–∞–ø–∫–∏ –≤ Yandex Cloud
- **YANDEX_IAM_TOKEN** - IAM —Ç–æ–∫–µ–Ω (–∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 12 —á–∞—Å–æ–≤!)

‚ö†Ô∏è **–í–ê–ñ–ù–û –¥–ª—è Production:**
IAM —Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 12 —á–∞—Å–æ–≤! –î–ª—è production –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Service Account:

```
YANDEX_SERVICE_ACCOUNT_ID=ajexxxxxxxxxxxxx
YANDEX_SERVICE_ACCOUNT_KEY={"service_account_id":"...","id":"...","private_key":"..."}
```

–ù–æ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç IAM_TOKEN. –î–ª—è production –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç:
1. –°–æ–∑–¥–∞—Ç—å Service Account
2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Service Account –∫–ª—é—á–∞
3. –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ IAM —Ç–æ–∫–µ–Ω–∞

---

#### 6. **Yandex AI Studio Classifier**
```
YANDEX_AI_STUDIO_CLASSIFIER_ID=classifier-xxxxx
```
- ID –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∏–∑ https://studio.yandex.cloud
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è LLM –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

---

#### 7. **YandexGPT Model**
```
YANDEX_GPT_MODEL=yandexgpt-pro/latest
```
- –ò–ª–∏ `yandexgpt/latest` –¥–ª—è –¥–µ—à–µ–≤–ª–µ (–Ω–æ —Ö—É–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `yandexgpt-pro/latest`

---

### üîß –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

#### 8. **Multi-Agent System**
```
AGENT_ENABLED=true
AGENT_MAX_PARALLEL=3
AGENT_TIMEOUT=300
AGENT_RETRY_COUNT=2
```
- –£–∂–µ –µ—Å—Ç—å –≤ render.yaml —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

---

#### 9. **LangSmith** (–¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```
LANGSMITH_API_KEY=lsv2_xxxxx
LANGSMITH_PROJECT=legal-ai-vault
LANGCHAIN_TRACING_V2=false
LANGCHAIN_ENDPOINT=https://api.smith.langchain.com
```
- –ù—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ LangSmith

---

#### 10. **Vector Database** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```
VECTOR_DB_DIR=/tmp/vector_db
```
- –£–∂–µ –µ—Å—Ç—å –≤ render.yaml
- –î–ª—è production –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

---

## üìù –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≤ Render Dashboard

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π Render Dashboard
1. –ó–∞–π–¥–∏ –Ω–∞ https://dashboard.render.com
2. –í—ã–±–µ—Ä–∏ —Å–≤–æ–π —Å–µ—Ä–≤–∏—Å `legal-ai-vault`

### –®–∞–≥ 2: Environment Variables
1. –ü–µ—Ä–µ–π–¥–∏ –≤ —Ä–∞–∑–¥–µ–ª **"Environment"**
2. –ù–∞–∂–º–∏ **"Add Environment Variable"**

### –®–∞–≥ 3: –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–î–æ–±–∞–≤—å –∫–∞–∂–¥—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø–æ –æ—á–µ—Ä–µ–¥–∏:

```
Key: DATABASE_URL
Value: (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ PostgreSQL —Å–µ—Ä–≤–∏—Å–∞)
```

```
Key: OPENROUTER_API_KEY
Value: sk-or-v1-—Ç–≤–æ–π-–∫–ª—é—á
```

```
Key: JWT_SECRET_KEY
Value: —Ç–≤–æ–π-–¥–ª–∏–Ω–Ω—ã–π-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞
```

```
Key: YANDEX_FOLDER_ID
Value: b1gxxxxxxxxxxxxx
```

```
Key: YANDEX_IAM_TOKEN
Value: t1.xxxxxxxxxxxxx
```

```
Key: YANDEX_AI_STUDIO_CLASSIFIER_ID
Value: classifier-xxxxx
```

```
Key: CORS_ORIGINS
Value: https://—Ç–≤–æ–π-—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.onrender.com
```

### –®–∞–≥ 4: –°–æ—Ö—Ä–∞–Ω–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏
1. –ù–∞–∂–º–∏ **"Save Changes"**
2. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π **Environment Variables** –≤ Render (–Ω–µ —Ö–∞—Ä–¥–∫–æ–¥—å –≤ –∫–æ–¥–µ!)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π **—Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è JWT_SECRET_KEY (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á—å **CORS_ORIGINS** —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏
- ‚úÖ –ù–µ –∫–æ–º–º–∏—Ç—å `.env` —Ñ–∞–π–ª—ã –≤ Git

### ‚ùå –ß–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å:
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π `JWT_SECRET_KEY`
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π `CORS_ORIGINS=*` –≤ production
- ‚ùå –ù–µ —Ö—Ä–∞–Ω–∏ —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ
- ‚ùå –ù–µ –¥–µ–ª–∏—Å—å IAM —Ç–æ–∫–µ–Ω–∞–º–∏ –ø—É–±–ª–∏—á–Ω–æ

---

## üö® –í–∞–∂–Ω–æ –¥–ª—è Production

### –ü—Ä–æ–±–ª–µ–º–∞ —Å IAM —Ç–æ–∫–µ–Ω–æ–º:
IAM —Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ **12 —á–∞—Å–æ–≤**! –≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –¥–ª—è production.

### –†–µ—à–µ–Ω–∏—è:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: Service Account (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –°–æ–∑–¥–∞–π Service Account –≤ Yandex Cloud
2. –°–æ–∑–¥–∞–π JSON –∫–ª—é—á –¥–ª—è Service Account
3. –û–±–Ω–æ–≤–∏ –∫–æ–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Service Account –∫–ª—é—á–∞
4. –î–æ–±–∞–≤—å –≤ Render:
   ```
   YANDEX_SERVICE_ACCOUNT_ID=aje...
   YANDEX_SERVICE_ACCOUNT_KEY={"service_account_id":"...","id":"...","private_key":"..."}
   ```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ IAM —Ç–æ–∫–µ–Ω–∞
–°–æ–∑–¥–∞–π cron job, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç IAM —Ç–æ–∫–µ–Ω –∫–∞–∂–¥—ã–µ 11 —á–∞—Å–æ–≤:
```python
# –í Render –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Scheduled Jobs
yc iam create-token > /tmp/iam_token.txt
# –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Render API
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ OpenRouter (–±–µ–∑ –Ø–Ω–¥–µ–∫—Å)
–ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å –≤–æ–∑–∏—Ç—å—Å—è —Å –Ø–Ω–¥–µ–∫—Å —Ç–æ–∫–µ–Ω–∞–º–∏:
- –ü—Ä–æ—Å—Ç–æ –Ω–µ –¥–æ–±–∞–≤–ª—è–π Yandex –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenRouter –∫–∞–∫ fallback

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] DATABASE_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–∏–∑ PostgreSQL —Å–µ—Ä–≤–∏—Å–∞)
- [ ] OPENROUTER_API_KEY –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] JWT_SECRET_KEY —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- [ ] CORS_ORIGINS —É–∫–∞–∑–∞–Ω (URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)
- [ ] YANDEX_FOLDER_ID –¥–æ–±–∞–≤–ª–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –Ø–Ω–¥–µ–∫—Å)
- [ ] YANDEX_IAM_TOKEN –¥–æ–±–∞–≤–ª–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –Ø–Ω–¥–µ–∫—Å)
- [ ] YANDEX_AI_STUDIO_CLASSIFIER_ID –¥–æ–±–∞–≤–ª–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Render
- [ ] –°–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:
```bash
# –í Render Dashboard ‚Üí Logs
# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
‚úÖ Using Yandex embeddings (–ª—É—á—à–µ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ!)
‚úÖ Using YandexGPT for planning (10x –¥–µ—à–µ–≤–ª–µ!)
```

### 2. –ü—Ä–æ–≤–µ—Ä—å API:
```bash
# Health check
curl https://—Ç–≤–æ–π-–±—ç–∫–µ–Ω–¥.onrender.com/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status": "ok"}
```

### 3. –ü—Ä–æ–≤–µ—Ä—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:
```bash
# –ü–æ–ø—Ä–æ–±—É–π –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
# –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫
```

---

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: "YANDEX_FOLDER_ID not set"
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Yandex –≤ Render –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ OpenRouter

### –ü—Ä–æ–±–ª–µ–º–∞: "JWT_SECRET_KEY is too short"
**–†–µ—à–µ–Ω–∏–µ:** –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –Ω–æ–≤—ã–π –∫–ª—é—á: `openssl rand -hex 32`

### –ü—Ä–æ–±–ª–µ–º–∞: "CORS error"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å CORS_ORIGINS - –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "Database connection failed"
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å DATABASE_URL - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

---

## üéØ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–±–µ–∑ –Ø–Ω–¥–µ–∫—Å):

```
‚úÖ DATABASE_URL
‚úÖ OPENROUTER_API_KEY
‚úÖ JWT_SECRET_KEY
‚úÖ CORS_ORIGINS
```

–û—Å—Ç–∞–ª—å–Ω–æ–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ! –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ OpenRouter.
