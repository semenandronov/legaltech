"""
Tool Descriptions Library - детальные описания tools с примерами использования

Используется для Extreme Context Engineering - агенты получают детальную информацию
о том, когда и как использовать каждый tool.
"""

RETRIEVE_DOCUMENTS_DESCRIPTION = """
Поиск релевантных документов в деле через semantic search.

## КОГДА ИСПОЛЬЗОВАТЬ
- Нужна информация из документов дела
- Проверка фактов или цитат из документов
- Поиск источников для подтверждения выводов
- Извлечение контекста для анализа

## ПАРАМЕТРЫ

### query: Поисковый запрос
**ВАЖНО:** Используй юридическую терминологию из дела

**Хорошие примеры:**
- "условия расторжения договора поставки с неустойкой"
- "ответственность поставщика за нарушение сроков поставки"
- "сумма договора цена оплата"
- "дата подписания договора срок действия"

**Плохие примеры:**
- "расторжение" (слишком общий)
- "договор" (слишком общий)
- "все" (не информативно)

**Стратегия формулировки:**
1. Включи ключевые юридические термины из запроса
2. Добавь контекст (тип документа, сторона, предмет)
3. Используй синонимы для важных понятий
4. Уточни временные рамки если важно

### k: Количество результатов
**Рекомендации:**
- Для анализа: 15-20 (полный контекст)
- Для проверки факта: 5-10 (быстрая проверка)
- Для поиска цитат: 10-15 (баланс между точностью и покрытием)
- Для извлечения: 20-30 (максимальное покрытие)

**Правило:** Больше результатов = больше контекста, но медленнее

### use_iterative: True/False
**True - используй для:**
- Сложных запросов требующих уточнения
- Критичных задач (risk, discrepancy)
- Когда результаты первого поиска не релевантны
- Когда нужна максимальная точность

**False - используй для:**
- Простых запросов
- Быстрых проверок
- Когда время критично

## ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ

### Пример 1: Поиск условий договора
```python
retrieve_documents_tool(
    query="предмет договора поставки количество товара цена единица измерения",
    case_id="case_123",
    k=15,
    use_iterative=False
)
```
**Когда:** Извлечение базовой информации о договоре
**Ожидаемый результат:** Документы с описанием предмета договора, количества, цены

### Пример 2: Поиск рисковых пунктов
```python
retrieve_documents_tool(
    query="ответственность поставщика неустойка штраф пени нарушение сроков",
    case_id="case_123",
    k=20,
    use_iterative=True  # Критично для risk analysis
)
```
**Когда:** Risk analysis, поиск пунктов об ответственности
**Ожидаемый результат:** Документы с условиями об ответственности и неустойках

### Пример 3: Проверка факта
```python
retrieve_documents_tool(
    query="дата подписания договора поставки номер",
    case_id="case_123",
    k=5,
    use_iterative=False
)
```
**Когда:** Быстрая проверка конкретного факта
**Ожидаемый результат:** Документы с датой подписания

## ТИПИЧНЫЕ ОШИБКИ

1. **Слишком общий запрос**
   - ❌ "договор"
   - ✅ "условия договора поставки сроки оплаты"

2. **Слишком специфичный запрос**
   - ❌ "договор поставки номер ДП-2023-456 от 20.09.2023 пункт 3.2 подпункт а"
   - ✅ "договор поставки номер условия оплаты"

3. **Забыл про use_iterative для критичных задач**
   - ❌ retrieve_documents_tool(..., use_iterative=False) для risk analysis
   - ✅ retrieve_documents_tool(..., use_iterative=True) для risk analysis

4. **Неправильный k для задачи**
   - ❌ k=5 для полного анализа
   - ✅ k=20 для полного анализа
"""

LEGAL_RESEARCH_DESCRIPTION = """
Поиск прецедентов и case law в российских источниках права.

## КОГДА ИСПОЛЬЗОВАТЬ
- Нужны прецеденты по аналогичным делам
- Поиск практики судов по вопросу
- Верификация правовых позиций
- Поиск релевантной судебной практики

## ПАРАМЕТРЫ

### query: Поисковый запрос
Формулируй запрос используя юридическую терминологию:
- "возмещение убытков по договору поставки"
- "признание договора недействительным судебная практика"
- "неустойка за нарушение сроков поставки ВАС"

### source: Источник поиска
- "moyarbitr" - МойАрбитр (судебные решения)
- "vas" - ВАС практика (практика Высшего Арбитражного Суда)
- "all" - все источники (рекомендуется)

### max_results: Максимальное количество результатов
- Рекомендуется: 10-15
- Для глубокого исследования: 15-20

## ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ

### Пример 1: Поиск практики по неустойке
```python
legal_research_tool(
    query="неустойка за нарушение сроков поставки судебная практика ВАС",
    source="all",
    max_results=15
)
```

### Пример 2: Поиск прецедентов
```python
legal_research_tool(
    query="возмещение убытков договор поставки некачественный товар",
    source="moyarbitr",
    max_results=10
)
```
"""

WRITE_FILE_DESCRIPTION = """
Записывает результат в файл workspace (DeepAgents pattern).

## КОГДА ИСПОЛЬЗОВАТЬ
- После завершения анализа агентом
- Для сохранения промежуточных результатов
- Для sharing результатов между агентами

## ВАЖНО
ВСЕГДА сохраняй результаты в файлы, а не только в state!
File system - source of truth для длительных операций.

## ПАРАМЕТРЫ
- filename: Имя файла (например, "timeline.json", "key_facts.json")
- content: Содержимое (JSON строка или dict)
- subdirectory: "results" (по умолчанию) для результатов агентов

## ПРИМЕРЫ
```python
write_file_tool(
    filename="timeline.json",
    content=json.dumps(timeline_events),
    subdirectory="results"
)
```
"""

READ_FILE_DESCRIPTION = """
Читает файл из workspace.

## КОГДА ИСПОЛЬЗОВАТЬ
- Для чтения результатов других агентов
- Для проверки существующих результатов
- Для использования промежуточных данных

## ПРИМЕРЫ
```python
read_file_tool("results/timeline.json")
read_file_tool("plan.json")  # Корень workspace
```
"""

LS_DESCRIPTION = """
Список файлов в workspace.

## КОГДА ИСПОЛЬЗОВАТЬ
- Перед принятием решения о следующем шаге
- Для проверки доступных результатов
- Для понимания состояния workspace

## ПРИМЕРЫ
```python
ls_tool("results")  # Список результатов
ls_tool(".")  # Все файлы
```
"""

WRITE_TODOS_DESCRIPTION = """
Записывает план задач (DeepAgents write_todos pattern).

## КОГДА ИСПОЛЬЗОВАТЬ
- При создании плана анализа
- Для сохранения стратегии выполнения
- Planning Agent должен использовать этот tool

## ФОРМАТ
JSON с планом:
```json
{
  "goals": [...],
  "steps": [...],
  "reasoning": "..."
}
```
"""

# Словарь всех descriptions для использования в tools
TOOL_DESCRIPTIONS = {
    "retrieve_documents": RETRIEVE_DOCUMENTS_DESCRIPTION,
    "legal_research": LEGAL_RESEARCH_DESCRIPTION,
    "write_file": WRITE_FILE_DESCRIPTION,
    "read_file": READ_FILE_DESCRIPTION,
    "ls": LS_DESCRIPTION,
    "write_todos": WRITE_TODOS_DESCRIPTION
}


