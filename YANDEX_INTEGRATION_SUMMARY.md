# –ò—Ç–æ–≥–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Yandex AI Studio

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 1. Search Index API
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SDK (`yandex-cloud-ml-sdk`)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–∞–∫ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ `sdk.files.upload()`
- ‚úÖ –ò–Ω–¥–µ–∫—Å —Å–æ–∑–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `sdk.search_indexes.create_deferred()` —Å file_ids
- ‚úÖ –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–µ–π—Å–∞ –∏–Ω–¥–µ–∫—Å —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ Yandex

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –§–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è LangChain-–ª–æ–∞–¥–µ—Ä—ã
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (files, document_chunks, cases)

### 3. Model URI
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã URI (`gpt://...`, `emb://...`)
- ‚úÖ URI –±–µ—Ä—É—Ç—Å—è –∏–∑ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –ï—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ URI –∏–∑ –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏–º–µ–Ω

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –î–æ—Å—Ç—É–ø –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `user_id`

---

## ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è

### 1. Assistants API (–ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø –≤ –∫–æ–¥–µ!)

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `foundationModels/v1/assistants`

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- `backend/app/services/yandex_assistant.py` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É
- `backend/app/services/rag_service.py:275` - `assistant_service.send_message()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –≤ —á–∞—Ç–µ

**–í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç –∫–æ–¥ **–∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–µ—Ä—Ç–≤—ã–º –∫–æ–¥–æ–º!

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–π endpoint `foundationModels/v1/assistants`
- –ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ Responses API —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º `file_search` –∏–ª–∏ –Ω–æ–≤—ã–π Assistants API

**–†–µ—à–µ–Ω–∏–µ:**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Responses API –Ω–∞–ø—Ä—è–º—É—é (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–í–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Responses API —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º `file_search`:

```python
from yandex_cloud_ml_sdk import YCloudML
from yandex_cloud_ml_sdk.auth import APIKeyAuth

sdk = YCloudML(folder_id=folder_id, auth=APIKeyAuth(api_key))
model = sdk.models.completions(model_uri)

response = model.run(
    messages=[
        {"role": "user", "content": query}
    ],
    tools=[{
        "type": "file_search",
        "index_id": index_id
    }]
)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è/—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞–º–∏
- –ü—Ä–æ—â–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º Yandex

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É `rag_service.py`

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SDK –¥–ª—è Assistants (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ SDK –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤:

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞
if hasattr(sdk, 'assistants'):
    assistant = sdk.assistants.create(...)
```

–ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –Ω–µ—Ç - –í–∞—Ä–∏–∞–Ω—Ç A.

---

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å Assistants API (–ö—Ä–∏—Ç–∏—á–Ω–æ!)

**–®–∞–≥ 1:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ SDK –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤
```python
sdk = YCloudML(folder_id=folder_id, auth=auth)
print(hasattr(sdk, 'assistants'))
if hasattr(sdk, 'assistants'):
    print(dir(sdk.assistants))
```

**–®–∞–≥ 2A:** –ï—Å–ª–∏ SDK –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤
- –ó–∞–º–µ–Ω–∏—Ç—å REST API –Ω–∞ `sdk.assistants.create()`
- –ó–∞–º–µ–Ω–∏—Ç—å `send_message` –Ω–∞ `sdk.assistants.chat()`

**–®–∞–≥ 2B:** –ï—Å–ª–∏ SDK –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤
- –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `rag_service.generate_with_sources()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Responses API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sdk.models.completions()` —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º `file_search`
- –£–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `YandexAssistantService`

**–®–∞–≥ 3:** –£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥
- –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å `yandex_assistant.py` –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è Vector Store

**–¢–µ–∫—É—â–∏–π —Ñ–æ—Ä–º–∞—Ç:** JSON `{"text": "...", "metadata": {...}}`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ –≤ —Ç–µ–∫—É—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ
- –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Responses API

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Yandex AI Studio - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://yandex.cloud/ru/docs/ai-studio/)
- [Yandex Cloud ML SDK - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫](https://yandex.cloud/ru/docs/ai-studio/sdk/)
- [Vector Store API](https://yandex.cloud/ru/docs/ai-studio/concepts/vector-store)
- Responses API: OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

---

## –í—ã–≤–æ–¥

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Assistants API**

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:** 1 (Assistants API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–π endpoint)

**–í–∞–∂–Ω–æ:** Assistants API –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ (–Ω–µ –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥), –ø–æ—ç—Ç–æ–º—É –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Responses API —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º `file_search` –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ - —ç—Ç–æ –ø—Ä–æ—â–µ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º Yandex.

